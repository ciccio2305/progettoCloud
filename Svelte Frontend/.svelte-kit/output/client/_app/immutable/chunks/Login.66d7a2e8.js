import{S as ue,i as me,s as pe,e as i,a as p,t as S,c as r,b as c,f as n,g as f,d as k,v as t,h as fe,j as e,w as U,n as ee,x as he,y as ye}from"./index.96ff6eb1.js";import{c as ge,g as ve}from"./config.a323d1f8.js";import{U as _e}from"./Login.svelte_svelte_type_style_lang.88ee8142.js";import{s as Ee}from"./stores.32eab677.js";function be(y){let a,u,d,o,h,H,g,V,j,s,l,m,_,R,P,A,L,$,T,w,q,G,B,K,C,O,E,z,F,N,J,b,Q,W,x,X,Y,se;return{c(){a=i("div"),u=i("div"),d=p(),o=i("div"),h=i("span"),H=p(),g=i("div"),V=S("Login"),j=p(),s=i("div"),l=i("div"),m=i("div"),_=S("Email"),R=p(),P=i("input"),A=p(),L=i("div"),$=p(),T=i("div"),w=i("div"),q=S("Password"),G=p(),B=i("input"),K=p(),C=i("div"),O=p(),E=i("div"),z=S("Submit"),F=p(),N=i("div"),J=S(`Non hai un account?\r
            `),b=i("div"),Q=S("Registrati"),W=p(),x=i("div"),X=S("Homepage"),this.h()},l(M){a=r(M,"DIV",{class:!0});var I=c(a);u=r(I,"DIV",{class:!0}),c(u).forEach(n),d=f(I),o=r(I,"DIV",{class:!0});var D=c(o);h=r(D,"SPAN",{id:!0,class:!0}),c(h).forEach(n),H=f(D),g=r(D,"DIV",{id:!0,class:!0});var ae=c(g);V=k(ae,"Login"),ae.forEach(n),j=f(D),s=r(D,"DIV",{id:!0,class:!0});var v=c(s);l=r(v,"DIV",{class:!0});var le=c(l);m=r(le,"DIV",{id:!0,class:!0});var ie=c(m);_=k(ie,"Email"),ie.forEach(n),le.forEach(n),R=f(v),P=r(v,"INPUT",{type:!0,name:!0,class:!0}),A=f(v),L=r(v,"DIV",{class:!0,id:!0}),c(L).forEach(n),$=f(v),T=r(v,"DIV",{class:!0});var re=c(T);w=r(re,"DIV",{id:!0,class:!0});var oe=c(w);q=k(oe,"Password"),oe.forEach(n),re.forEach(n),G=f(v),B=r(v,"INPUT",{type:!0,name:!0,class:!0}),K=f(v),C=r(v,"DIV",{class:!0,id:!0}),c(C).forEach(n),O=f(v),E=r(v,"DIV",{id:!0,class:!0});var ne=c(E);z=k(ne,"Submit"),ne.forEach(n),v.forEach(n),F=f(D),N=r(D,"DIV",{class:!0});var Z=c(N);J=k(Z,`Non hai un account?\r
            `),b=r(Z,"DIV",{id:!0,class:!0});var de=c(b);Q=k(de,"Registrati"),de.forEach(n),Z.forEach(n),D.forEach(n),W=f(I),x=r(I,"DIV",{id:!0,class:!0});var ce=c(x);X=k(ce,"Homepage"),ce.forEach(n),I.forEach(n),this.h()},h(){t(u,"class","errorBanner svelte-11ixyb0"),t(h,"id","loader"),t(h,"class","svelte-11ixyb0"),t(g,"id","title"),t(g,"class","svelte-11ixyb0"),t(m,"id","namePlaceholder"),t(m,"class","svelte-11ixyb0"),t(l,"class","placeholder svelte-11ixyb0"),t(P,"type","text"),t(P,"name","email"),t(P,"class","svelte-11ixyb0"),t(L,"class","errorPlaceholder svelte-11ixyb0"),t(L,"id","errorName"),t(w,"id","passPlaceholder"),t(w,"class","svelte-11ixyb0"),t(T,"class","placeholder svelte-11ixyb0"),t(B,"type","password"),t(B,"name","password"),t(B,"class","svelte-11ixyb0"),t(C,"class","errorPlaceholder svelte-11ixyb0"),t(C,"id","errorPass"),t(E,"id","submit"),t(E,"class","svelte-11ixyb0"),t(s,"id","form"),t(s,"class","svelte-11ixyb0"),t(b,"id","register"),t(b,"class","svelte-11ixyb0"),t(N,"class","svelte-11ixyb0"),t(o,"class","login_container svelte-11ixyb0"),t(x,"id","homepage"),t(x,"class","svelte-11ixyb0"),t(a,"class","login_page svelte-11ixyb0")},m(M,I){fe(M,a,I),e(a,u),e(a,d),e(a,o),e(o,h),e(o,H),e(o,g),e(g,V),e(o,j),e(o,s),e(s,l),e(l,m),e(m,_),e(s,R),e(s,P),e(s,A),e(s,L),e(s,$),e(s,T),e(T,w),e(w,q),e(s,G),e(s,B),e(s,K),e(s,C),e(s,O),e(s,E),e(E,z),e(o,F),e(o,N),e(N,J),e(N,b),e(b,Q),e(a,W),e(a,x),e(x,X),Y||(se=[U(P,"input",y[3]),U(B,"input",y[4]),U(E,"click",y[0]),U(b,"click",y[1]),U(x,"click",y[2])],Y=!0)},p:ee,i:ee,o:ee,d(M){M&&n(a),Y=!1,he(se)}}}function te(y,a,u){if(y){document.getElementById("loader").style.display="block";let d=document.createElement("div");d.setAttribute("id","cover"),document.getElementsByClassName("login_container")[0].appendChild(d)}if(a){document.getElementById("loader").style.display="none",document.getElementById("cover").remove();let d=document.getElementsByClassName("errorBanner")[0];d.innerHTML=u,d.style.opacity=1,setTimeout(function(){d.style.opacity=0},5e3)}}function xe(y){let a="",u="",d=!1,o=!1,h="";ye(()=>{fetch(ge.getHost()+"/api/whoami",{method:"GET",headers:{"Content-Type":"application/json"}}).then(l=>l.json()).then(l=>{Object.keys(l).includes("error")||V()}).catch(l=>console.log(l))});async function H(){console.log("send_login()"),d=!0,o=!1,te(d,o,h);let l=a.replace(/@/g,"_._at");Ee.set(l+":"+u);try{const m=await _e.login(a,u).then(_=>_.text()).then(_=>{_.includes("Logged")?V():te(!1,!0,_)});d=!1}catch(m){o=!0,h=m.toString(),d=!1,console.error(m),te(d,o,h)}}function g(){ve("../register")}function V(){ve("../homepage")}async function j(l){a=l.target.value}async function s(l){u=l.target.value}return[H,g,V,j,s]}class we extends ue{constructor(a){super(),me(this,a,xe,be,pe,{})}}export{we as L};
