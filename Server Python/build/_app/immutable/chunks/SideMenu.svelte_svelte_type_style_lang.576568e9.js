import{c as h,g as E}from"./config.293d0793.js";import{c as d,t as v,l as C}from"./stores.32eab677.js";var i="";d.subscribe(t=>{i=t});var r="";d.subscribe(t=>{r=t});var c="";function L(t){let l=document.getElementById("loader");l.style.display="flex";let s=document.getElementById("filter");s.style.display="block",console.log("nome del pad:"+t),fetch(h.getHost()+"/api/get_pad"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{console.log(o);let n=o.destination_url;console.log(n),localStorage.setItem("padSrc",n),E("/etherpadManager")}).catch(o=>{console.log(o)});let e=Date.now();console.log("minutes: "+e),v.set(Date.now()),C.set(t)}function x(t){fetch(h.getHost()+"/api/touch"+i+"/"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(l=>{console.log(l.text())}).then(()=>{m(i)}).catch(l=>{console.error("Error:",l)})}function _(t){fetch(h.getHost()+"/api/mkdir"+i+"/"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(l=>{console.log(l.text())}).then(()=>{m(i)}).catch(l=>{console.error("Error:",l)})}function m(t){var l=[];c=i,d.set(t),d.subscribe(s=>{i=s}),r=t.substring(0,t.lastIndexOf("/")),console.log("currentPathList"+t),console.log("pathPreviousList"+r),console.log("pathNext:"+c),fetch(h.getHost()+"/api/ls"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{s.forEach(e=>{if(console.log(e),e.type=="PAD"){e.father_dir,console.log("status: "+e.completato);var o=new y(e.name,e.type,e.lastModified,e.father_dir,e.completato);l.push(o)}else{e.father_dir;var n=new b(e.name,e.type,e.lastModified,e.father_dir);l.push(n)}})}).then(()=>{T(l)}).catch(s=>{console.error("Error:",s)})}function T(t){console.log("REFRESHPAGE"),setTimeout(()=>{var l,s;document.querySelector(".listContainer").innerHTML="";for(let e of t)if(e.type=="PAD"){let o=H(e.name,e.father_dir,e.status);(l=document.querySelector(".listContainer"))==null||l.appendChild(o)}else{let o=M(e.name,e.father_dir);(s=document.querySelector(".listContainer"))==null||s.appendChild(o)}},300)}function H(t,l,s){console.log("Completed:"+s);let e=document.createElement("div");e.classList.toggle("bigContainer");let o=document.createElement("i");o.classList.toggle("icon"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="M18 22a2 2 0 0 0 2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12zM13 4l5 5h-5V4zM7 8h3v2H7V8zm0 4h10v2H7v-2zm0 4h10v2H7v-2z"></path></svg>',e.appendChild(o);let n=document.createElement("div");n.classList.toggle("container");let a=document.createElement("span");a.innerHTML=t,a.addEventListener("click",u=>{u.stopPropagation(),u.preventDefault(),L(l+t)}),n.appendChild(a),a=document.createElement("span"),a.innerHTML="File di testo",n.appendChild(a),a=document.createElement("span"),a.innerHTML="lastModified",n.appendChild(a),a=document.createElement("span"),a.innerHTML="otherInfo",n.appendChild(a),a=document.createElement("span");let p=document.createElement("input");p.type="checkbox",s==!0?p.checked=!0:p.checked=!1;let g=document.createElement("label");return g.classList.toggle("switch"),g.appendChild(p),a=document.createElement("span"),a.classList.toggle("slider"),a.classList.toggle("round"),g.appendChild(a),a=document.createElement("span"),a.appendChild(g),p.addEventListener("click",u=>{u.stopPropagation(),fetch(h.getHost()+"/api/stats/update_status"+l+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(f=>f.text()).then(f=>{f=="correttamente"&&console.log("correttamente"),console.log("fetched")})}),n.appendChild(a),e.appendChild(n),e}function M(t,l){if(!t)return;console.log("FATHER: "+l),console.log("NAME: "+t),console.log("PATHNEXT GENERATEDIR: "+c);let s=document.createElement("div");s.classList.toggle("bigContainer");let e=document.createElement("i");e.classList.toggle("icon"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="M2.165 19.551c.186.28.499.449.835.449h15c.4 0 .762-.238.919-.606l3-7A.998.998 0 0 0 21 11h-1V8c0-1.103-.897-2-2-2h-6.655L8.789 4H4c-1.103 0-2 .897-2 2v13h.007a1 1 0 0 0 .158.551zM18 8v3H6c-.4 0-.762.238-.919.606L4 14.129V8h14z"></path></svg>',s.appendChild(e);let o=document.createElement("div");o.classList.toggle("container");let n=document.createElement("span");return n.innerHTML=t,o.appendChild(n),n=document.createElement("span"),n.innerHTML="Cartella",o.appendChild(n),n=document.createElement("span"),n.innerHTML="lastModified",o.appendChild(n),n=document.createElement("span"),n.innerHTML="otherInfo",o.appendChild(n),n=document.createElement("span"),n.innerHTML="/",o.appendChild(n),console.log("before pathPre "+r),console.log("before current "+i),console.log("before pathNext "+c),o.onclick=()=>{console.log("div.onclick. pathPrevious "+r),d.set(l+t),d.subscribe(a=>{i=a}),r=l,c=i,console.log("after pathPrevious "+r),console.log("after current "+i),console.log("after pathNext "+c),m(i)},s.appendChild(o),s}class y{constructor(l,s,e,o,n){this.name=l,this.type=s,this.lastModified=e,this.father_dir=o,this.status=n}}class b{constructor(l,s,e,o){this.name=l,this.type=s,this.lastModified=e,this.father_dir=o}}m(i);export{i as P,x as a,c as b,_ as c,m as l,r as p};
